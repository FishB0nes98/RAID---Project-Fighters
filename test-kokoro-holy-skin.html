<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Kokoro Holy Skin VFX</title>
    
    <!-- Base styles -->
    <link rel="stylesheet" href="css/schoolgirl_kokoro_abilities.css">
    <link rel="stylesheet" href="css/schoolgirl_kokoro_holy.css">
    
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #2c3e50;
            color: white;
            padding: 20px;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .character-slot {
            width: 150px;
            height: 200px;
            background: #34495e;
            border: 2px solid #3498db;
            border-radius: 8px;
            position: relative;
            display: inline-block;
            margin: 20px;
            overflow: visible;
            transition: all 0.3s ease;
        }
        
        .character-avatar {
            width: 100px;
            height: 100px;
            background: #e74c3c;
            border-radius: 50%;
            position: absolute;
            top: 20px;
            left: 25px;
            z-index: 10;
        }
        
        .character-name {
            position: absolute;
            bottom: 40px;
            left: 10px;
            right: 10px;
            text-align: center;
            font-size: 12px;
            background: rgba(0, 0, 0, 0.7);
            padding: 4px;
            border-radius: 4px;
            z-index: 20;
        }
        
        .character-hp {
            position: absolute;
            bottom: 10px;
            left: 10px;
            right: 10px;
            text-align: center;
            font-size: 12px;
            background: rgba(0, 0, 0, 0.7);
            padding: 4px;
            border-radius: 4px;
            z-index: 20;
        }
        
        .test-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 14px;
        }
        
        .test-button:hover {
            background: #2980b9;
        }
        
        .test-button:active {
            transform: scale(0.95);
        }
        
        .holy-skin-toggle {
            background: #f39c12;
            margin-bottom: 20px;
        }
        
        .holy-skin-toggle.active {
            background: #e67e22;
        }
        
        .test-results {
            margin-top: 20px;
            padding: 15px;
            background: rgba(52, 73, 94, 0.8);
            border-radius: 8px;
            border: 1px solid #34495e;
        }
        
        .ability-bar {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .ability {
            width: 50px;
            height: 50px;
            background: #95a5a6;
            border: 2px solid #7f8c8d;
            border-radius: 8px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .ability:hover {
            transform: scale(1.1);
        }
        
        .ability img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 6px;
        }
        
        .ability-image {
            width: 100%;
            height: 100%;
            border-radius: 6px;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Kokoro Holy Skin VFX Test</h1>
        <p>This test verifies the holy skin VFX overrides and stacking prevention.</p>
        
        <button class="test-button holy-skin-toggle" onclick="toggleHolySkin()">
            Toggle Holy Skin (Currently: <span id="skin-status">OFF</span>)
        </button>
        
        <div class="ability-bar">
            <div class="ability" data-ability-id="lesser_heal">
                <div class="ability-image">
                    <img src="Icons/abilities/lesser_heal.jfif" alt="Lesser Heal">
                </div>
            </div>
            <div class="ability" data-ability-id="silencing_ring">
                <div class="ability-image">
                    <img src="Icons/abilities/silencing_ring.jfif" alt="Silencing Ring">
                </div>
            </div>
            <div class="ability" data-ability-id="circle_heal">
                <div class="ability-image">
                    <img src="Icons/abilities/circle_heal.jfif" alt="Circle Heal">
                </div>
            </div>
            <div class="ability" data-ability-id="protective_aura">
                <div class="ability-image">
                    <img src="Icons/abilities/protective_aura.jfif" alt="Protective Aura">
                </div>
            </div>
        </div>
        
        <div class="character-slot" id="character-test">
            <div class="character-avatar"></div>
            <div class="character-name">Kokoro</div>
            <div class="character-hp">HP: 100/100</div>
        </div>
        
        <div>
            <button class="test-button" onclick="testQVFX()">Test Q VFX (Lesser Heal)</button>
            <button class="test-button" onclick="testSplashVFX()">Test Splash VFX</button>
            <button class="test-button" onclick="testPassiveVFX()">Test Passive VFX</button>
            <button class="test-button" onclick="testStackingVFX()">Test VFX Stacking</button>
            <button class="test-button" onclick="testHolyGlow()">Test Holy Glow</button>
            <button class="test-button" onclick="clearAllVFX()">Clear All VFX</button>
        </div>
        
        <div class="test-results">
            <h3>Test Results:</h3>
            <div id="test-log"></div>
        </div>
    </div>

    <script>
        let isHolySkinActive = false;
        
        function toggleHolySkin() {
            const characterSlot = document.getElementById('character-test');
            const abilityBar = document.querySelector('.ability-bar');
            const statusSpan = document.getElementById('skin-status');
            const toggleButton = document.querySelector('.holy-skin-toggle');
            
            if (isHolySkinActive) {
                characterSlot.classList.remove('schoolgirl-kokoro-holy');
                abilityBar.classList.remove('schoolgirl-kokoro-holy');
                statusSpan.textContent = 'OFF';
                toggleButton.classList.remove('active');
                logTest('Holy skin disabled');
            } else {
                characterSlot.classList.add('schoolgirl-kokoro-holy');
                abilityBar.classList.add('schoolgirl-kokoro-holy');
                statusSpan.textContent = 'ON';
                toggleButton.classList.add('active');
                logTest('Holy skin enabled');
            }
            
            isHolySkinActive = !isHolySkinActive;
        }
        
        function testQVFX() {
            const characterSlot = document.getElementById('character-test');
            clearAllVFX();
            
            // Create Q VFX
            const healVfx = document.createElement('div');
            healVfx.className = 'lesser-heal-vfx';
            
            const healNumber = document.createElement('div');
            healNumber.className = 'lesser-heal-number';
            healNumber.textContent = '+250';
            
            const leafContainer = document.createElement('div');
            leafContainer.className = 'lesser-heal-leaf-container';
            
            for (let i = 0; i < 3; i++) {
                const runeCircle = document.createElement('div');
                runeCircle.className = 'emerald-rune-circle';
                runeCircle.style.animationDelay = `${i * 0.2}s`;
                leafContainer.appendChild(runeCircle);
            }
            
            for (let i = 0; i < 8; i++) {
                const leaf = document.createElement('div');
                leaf.className = 'emerald-leaf';
                
                const angle = (i / 8) * 360;
                const delay = Math.random() * 0.5;
                const size = 10 + Math.random() * 10;
                
                leaf.style.setProperty('--angle', `${angle}deg`);
                leaf.style.setProperty('--delay', `${delay}s`);
                leaf.style.setProperty('--size', `${size}px`);
                
                leafContainer.appendChild(leaf);
            }
            
            healVfx.appendChild(healNumber);
            healVfx.appendChild(leafContainer);
            characterSlot.appendChild(healVfx);
            
            // Add Q healing active class
            characterSlot.classList.add('q-healing-active');
            
            logTest('Q VFX created - should be holy yellow if holy skin is active');
            
            setTimeout(() => {
                healVfx.remove();
                characterSlot.classList.remove('q-healing-active');
            }, 2000);
        }
        
        function testSplashVFX() {
            const characterSlot = document.getElementById('character-test');
            clearAllVFX();
            
            const splashVfx = document.createElement('div');
            splashVfx.className = 'lesser-heal-splash-vfx';
            
            const healNumber = document.createElement('div');
            healNumber.className = 'lesser-heal-splash-number';
            healNumber.textContent = '+125';
            
            const splashContainer = document.createElement('div');
            splashContainer.className = 'splash-heal-particles';
            
            for (let i = 0; i < 8; i++) {
                const droplet = document.createElement('div');
                droplet.className = 'heal-droplet';
                
                const angle = (i / 8) * 360;
                const delay = Math.random() * 0.3;
                const size = 4 + Math.random() * 6;
                
                droplet.style.setProperty('--angle', `${angle}deg`);
                droplet.style.setProperty('--delay', `${delay}s`);
                droplet.style.setProperty('--size', `${size}px`);
                
                splashContainer.appendChild(droplet);
            }
            
            splashVfx.appendChild(healNumber);
            splashVfx.appendChild(splashContainer);
            characterSlot.appendChild(splashVfx);
            
            logTest('Splash VFX created - should be holy yellow if holy skin is active');
            
            setTimeout(() => {
                splashVfx.remove();
            }, 1500);
        }
        
        function testPassiveVFX() {
            const characterSlot = document.getElementById('character-test');
            clearAllVFX();
            
            const passiveVfx = document.createElement('div');
            passiveVfx.className = 'kokoro-heal-vfx';
            
            const passiveText = document.createElement('span');
            passiveText.textContent = '+50';
            
            passiveVfx.appendChild(passiveText);
            characterSlot.appendChild(passiveVfx);
            
            logTest('Passive VFX created - should be holy yellow if holy skin is active');
            
            setTimeout(() => {
                passiveVfx.remove();
            }, 1500);
        }
        
        function testStackingVFX() {
            const characterSlot = document.getElementById('character-test');
            clearAllVFX();
            
            // Create both Q and passive VFX at the same time
            testQVFX();
            setTimeout(() => {
                testPassiveVFX();
            }, 100);
            
            logTest('VFX stacking test - passive VFX should be hidden/reduced when Q is active');
        }
        
        function testHolyGlow() {
            const characterSlot = document.getElementById('character-test');
            
            if (isHolySkinActive) {
                // Add different character states to test glow variations
                characterSlot.classList.add('selected');
                logTest('Holy glow test - character marked as selected');
                
                setTimeout(() => {
                    characterSlot.classList.remove('selected');
                    characterSlot.classList.add('active-turn');
                    logTest('Holy glow test - character marked as active turn');
                }, 2000);
                
                setTimeout(() => {
                    characterSlot.classList.remove('active-turn');
                    characterSlot.classList.add('ability-active');
                    logTest('Holy glow test - character marked as ability active');
                }, 4000);
                
                setTimeout(() => {
                    characterSlot.classList.remove('ability-active');
                    logTest('Holy glow test - all states cleared');
                }, 6000);
            } else {
                logTest('Holy glow test - enable holy skin first to see the glow effect');
            }
        }
        
        function clearAllVFX() {
            const characterSlot = document.getElementById('character-test');
            const vfxElements = characterSlot.querySelectorAll('.lesser-heal-vfx, .lesser-heal-splash-vfx, .kokoro-heal-vfx');
            vfxElements.forEach(element => element.remove());
            characterSlot.classList.remove('q-healing-active');
            logTest('All VFX cleared');
        }
        
        function logTest(message) {
            const testLog = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            testLog.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            testLog.scrollTop = testLog.scrollHeight;
        }
        
        // Initialize
        logTest('Test page loaded. Use the buttons to test VFX behavior.');
    </script>
</body>
</html>
